<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout}">
<main layout:fragment="content">
    <div th:each="line: ${lines}">
        <p th:text="${line}"\>
        </div>

    <div th:if="${googleMessage}" class="alert alert-info">
        <span th:text="${googleMessage}"></span>
    </div>

    <div class="mt-3">

        <!-- Wenn NICHT verbunden -->
        <a sec:authorize="hasRole('TEACHER')"
           th:if="${!googleConnected}"
           th:href="@{/google/oauth/connect(userId=${user.id})}"
           class="btn btn-primary">
            Mit Google Calendar verbinden
        </a>

        <!-- Wenn verbunden -->
        <div th:if="${googleConnected}">
            <span class="badge bg-success">Google Calendar verbunden ✓</span>

            <a th:href="@{/google/oauth/connect(userId=${user.id})}"
               class="btn btn-outline-primary ms-2">
                Erneut verbinden
            </a>
        </div>
        <a sec:authorize="hasRole('TEACHER')"
           th:href="@{/lehrer/{id}/verfuegbarkeit(id=${#authentication.principal.id})}"
           class="btn btn-primary">
            Verfügbarkeit verwalten
        </a>


    </div>


</main>
</html>