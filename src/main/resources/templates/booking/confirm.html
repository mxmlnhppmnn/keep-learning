<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<div layout:fragment="content">

    <h2 th:text="${@t.t('Buchung bestätigen')}"></h2>
    <hr>

    <div class="mb-3">
        <p>
            <strong th:text="${@t.t('Anzeige:')}"></strong>
            <span th:text="${anzeige.title}"></span>
        </p>
        <p>
            <strong th:text="${@t.t('Beschreibung:')}"></strong>
            <span th:text="${anzeige.description}"></span>
        </p>
        <p>
            <strong th:text="${@t.t('Preis:')}"></strong>
            <span th:text="${anzeige.price}"></span> €
        </p>
    </div>

    <div class="mb-3">
        <p>
            <strong th:text="${@t.t('Datum:')}"></strong>
            <span th:text="${date}"></span>
        </p>
        <p>
            <strong th:text="${@t.t('Uhrzeit:')}"></strong>
            <span th:text="${start}"></span> – <span th:text="${end}"></span>
            <span th:text="${@t.t('Uhr')}"></span>
        </p>
    </div>

    <div class="mb-3">
        <p>
            <strong th:text="${@t.t('Art der Buchung:')}"></strong>
            <span th:text="${probe} ? ${@t.t('Probestunde')} : ${@t.t('Normale Stunde')}"></span>
        </p>
    </div>

    <form method="post" th:action="@{/buchung/abschliessen}">
        <input type="hidden" name="advertisementId" th:value="${anzeige.id}">
        <input type="hidden" name="date" th:value="${date}">
        <input type="hidden" name="start" th:value="${start}">
        <input type="hidden" name="trialLesson" th:value="${probe}">

        <div class="mb-3" th:if="${!probe}">
            <label for="paymentMethod" class="form-label"><strong>Zahlungsmethode</strong></label>
            <select id="paymentMethod" name="paymentMethod" class="form-select">
                <option value="PAYPAL" th:selected="${paymentMethod == 'PAYPAL'}">PayPal</option>
                <option value="SEPA" th:selected="${paymentMethod == 'SEPA'}">SEPA</option>
            </select>
            <div class="form-text">Mock-Zahlung (keine echte PayPal-Anbindung) – dient nur dem Feature-Nachweis.</div>
        </div>

        <button class="btn btn-success" type="submit"
                th:text="${probe} ? ${@t.t('Buchung abschließen')} : 'Weiter zur Zahlung'">
        </button>
    </form>

    <a th:href="@{/anzeigen}"
       class="btn btn-secondary mt-3"
       th:text="${@t.t('Abbrechen')}"></a>

</div>

</html>

