<!DOCTYPE html>
<html lang="de"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout}">

<main layout:fragment="content">

    <h1 class="mb-4">Anzeige bearbeiten</h1>

    <form th:action="@{/anzeigen/bearbeiten/{id}(id=${advertisement.id})}"
          method="post"
          enctype="multipart/form-data"
          id="bearbeitenForm"
          class="row gy-3">

        <div class="col-12">
            <label class="form-label fw-semibold">Titel</label>
            <input type="text" name="titel"
                   class="form-control"
                   th:value="${advertisement.title}" required>
        </div>

        <div class="col-12">
            <label class="form-label fw-semibold">Beschreibung</label>
            <textarea name="beschreibung"
                      class="form-control"
                      rows="4"
                      required
                      th:text="${advertisement.description}"></textarea>
        </div>

        <div class="col-md-6">
            <label class="form-label fw-semibold">Fach</label>
            <input type="text"
                   name="subject"
                   class="form-control"
                   th:value="${advertisement.subject.name}" required>
        </div>

        <div class="col-md-6">
            <label class="form-label fw-semibold">Schulart</label>
            <select name="schoolType" class="form-select" required>
                <option th:selected="${advertisement.schoolType.name == 'Grundschule'}">Grundschule</option>
                <option th:selected="${advertisement.schoolType.name == 'Realschule'}">Realschule</option>
                <option th:selected="${advertisement.schoolType.name == 'Gymnasium'}">Gymnasium</option>
            </select>
        </div>

        <div class="col-md-6">
            <label class="form-label fw-semibold">Preis pro Stunde (€)</label>
            <input type="number"
                   name="preis"
                   class="form-control"
                   min="1"
                   step="1"
                   th:value="${advertisement.price}" required>
        </div>

        <div class="col-12">
            <label class="form-label fw-semibold">Bild ändern (optional)(max 5mb)</label>
            <input type="file" name="bild" class="form-control" accept="image/*">
        </div>

    </form>

    <div class="col-12 mt-3 d-flex align-items-center">

        <button type="submit"
                form="bearbeitenForm"
                class="btn btn-primary">
            Änderungen speichern
        </button>

        <a th:href="@{'/anzeigen/' + ${advertisement.id}}"
           class="btn btn-secondary ms-2">
            Abbrechen
        </a>

        <form th:action="@{/anzeigen/loeschen/{id}(id=${advertisement.id})}"
              method="post"
              class="ms-auto">
            <button type="submit" class="btn btn-danger">Löschen</button>
        </form>

    </div>

</main>
</html>
