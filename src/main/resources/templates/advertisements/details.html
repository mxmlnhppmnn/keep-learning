<!DOCTYPE html>
<html lang="de"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout}">

<body>
<main layout:fragment="content">

    <h1 th:text="${advertisement.title}" class="mb-3"></h1>

    <!-- Favoriten knopf f√ºr Sch√ºler -->
    <div sec:authorize="hasRole('STUDENT')">

        <form th:if="${!isFavorite}"
              th:action="@{/favoriten/{id}(id=${advertisement.id})}"
              method="post"
              class="d-inline">
            <button type="submit" class="btn btn-outline-danger">
                ü§ç Favorit
            </button>
        </form>

        <form th:if="${isFavorite}"
              th:action="@{/favoriten/{id}/delete(id=${advertisement.id})}"
              method="post"
              class="d-inline">
            <button type="submit" class="btn btn-danger">
                ‚ù§Ô∏è Favorit
            </button>
        </form>

    </div>

    <img th:if="${advertisement.imagePath != null}"
         th:src="@{/images/{file}(file=${advertisement.imagePath})}"
         class="img-fluid mb-3 rounded halb-bild"
         th:alt="${@t.t('Bild zur Anzeige')}">

    <p>
        <strong th:text="${@t.t('Fach:')}"></strong>
        <span th:text="${advertisement.subject.name}"></span>
    </p>

    <p>
        <strong th:text="${@t.t('Schulart:')}"></strong>
        <span th:text="${advertisement.schoolType.name}"></span>
    </p>

    <p>
        <strong th:text="${@t.t('Preis:')}"></strong>
        <span th:text="${advertisement.price}"></span> ‚Ç¨/h
    </p>

    <hr>

    <p th:text="${advertisement.description}"></p>

    <div class="d-flex gap-2">

        <!-- Bearbeiten nur f√ºr Ersteller -->
        <a th:if="${istErsteller}"
           th:href="@{'/anzeigen/bearbeiten/' + ${advertisement.id}}"
           class="btn btn-warning"
           th:text="${@t.t('Bearbeiten')}">
        </a>

        <!-- Buchen -->
        <a sec:authorize="hasRole('STUDENT')"
           th:href="@{/anzeigen/{id}/buchen(id=${advertisement.id})}"
           class="btn btn-primary"
           th:text="${@t.t('Buchen')}">
        </a>

        <!-- Zur√ºck -->
        <a th:href="@{/anzeigen}"
           class="btn btn-secondary"
           th:text="${@t.t('Zur√ºck zur √úbersicht')}">
        </a>

    </div>
</main>

</body>
</html>
