<!DOCTYPE html>
<html lang="de"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout}">

<body>
<div layout:fragment="content">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 th:text="${advertisement.title}" class="mb-0"></h1>

        <a class="btn fs-3 p-0 me-2" th:href="@{/user/view/{id}(id=${owner.id})}">
            <i class="bi bi-person-circle"></i>
        </a>
    </div>

    <!-- Favoriten knopf fÃ¼r SchÃ¼ler -->
    <div sec:authorize="hasRole('STUDENT')">

        <form th:if="${!isFavorite}"
              th:action="@{/favoriten/{id}(id=${advertisement.id})}"
              method="post"
              class="d-inline">
            <button type="submit" class="btn btn-outline-danger" th:text="${@t.t('ðŸ¤ Favorit')}">
            </button>
        </form>

        <form th:if="${isFavorite}"
              th:action="@{/favoriten/{id}/delete(id=${advertisement.id})}"
              method="post"
              class="d-inline">
            <button type="submit" class="btn btn-danger" th:text="${@t.t('â¤ï¸ Favorit')}">
            </button>
        </form>

    </div>

    <img th:if="${advertisement.imagePath != null}"
         th:src="@{/images/{file}(file=${advertisement.imagePath})}"
         class="img-fluid mb-3 rounded halb-bild"
         th:alt="${@t.t('Bild zur Anzeige')}">

    <p>
        <strong th:text="${@t.t('Fach:')}"></strong>
        <span th:text="${advertisement.subject.name}"></span>
    </p>

    <p>
        <strong th:text="${@t.t('Schulart:')}"></strong>
        <span th:text="${advertisement.schoolType.name}"></span>
    </p>

    <p>
        <strong th:text="${@t.t('Preis:')}"></strong>
        <span th:text="${advertisement.price}"></span> â‚¬/h
    </p>

    <hr>

    <p th:text="${advertisement.description}"></p>

    <div class="d-flex gap-2">

        <!-- Bearbeiten nur fÃ¼r Ersteller -->
        <a th:if="${istErsteller}"
           th:href="@{'/anzeigen/bearbeiten/' + ${advertisement.id}}"
           class="btn btn-warning"
           th:text="${@t.t('Bearbeiten')}">
        </a>

        <!-- Buchen -->
        <a sec:authorize="hasRole('STUDENT')"
           th:href="@{/anzeigen/{id}/buchen(id=${advertisement.id})}"
           class="btn btn-primary"
           th:text="${@t.t('Buchen')}">
        </a>

        <!-- ZurÃ¼ck -->
        <a th:href="@{/anzeigen}"
           class="btn btn-secondary"
           th:text="${@t.t('ZurÃ¼ck zur Ãœbersicht')}">
        </a>
    </div>
    <!-- Ã„hnliche Anzeigen -->
    <div class="mt-5"
         th:if="${!#lists.isEmpty(similarAdvertisements)}">
        <hr>
        <h4 th:text="${@t.t('Ã„hnliche Anzeigen')}"></h4>

        <div class="row mt-3">
            <div class="col-md-3"
                 th:each="ad : ${similarAdvertisements}">

                <div class="card h-100">

                    <img th:if="${ad.imagePath != null}"
                         th:src="@{/images/{file}(file=${ad.imagePath})}"
                         class="card-img-top"
                         alt="Anzeige Bild">

                    <div class="card-body">
                        <h6 class="card-title"
                            th:text="${ad.title}">
                            Titel
                        </h6>

                        <a th:href="@{/anzeigen/{id}(id=${ad.id})}"
                           class="btn btn-outline-primary btn-sm" th:text="${@t.t('Zur Anzeige')}">
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

</body>
</html>
